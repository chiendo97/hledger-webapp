{% extends "base.html" %}
{% set active = "is" %}
{% block title %}Income Statement{% endblock %}
{% block header %}Income Statement{% endblock %}

{% block content %}
{% include "partials/month_picker.html" %}
{% include "partials/depth_selector.html" %}
{% include "partials/sort_toggle.html" %}
{% for sub in report.subreports %}
<div class="mb-6">
  <h2 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-2">{{ sub.title }}</h2>
  <table class="w-full text-sm">
    <tbody>
    {% for row in sub.rows %}
      <tr class="border-b border-gray-800 hover:bg-gray-900/50 cursor-pointer" onclick="window.location='/register?account={{ row.name }}{% if month %}&month={{ month }}{% endif %}'">
        <td class="py-2 pr-2 text-gray-400 break-words" style="padding-left: {{ row.depth * 12 }}px">{{ row.name }}</td>
        <td class="py-2 pl-2 font-mono text-right whitespace-nowrap {% if row.amounts.startswith('-') %}text-red-400{% else %}text-green-400{% endif %}">{{ row.amounts }}</td>
      </tr>
    {% endfor %}
      <tr class="bg-gray-800/50">
        <td class="py-2 pr-2 font-semibold text-gray-300">Total</td>
        <td class="py-2 pl-2 font-mono font-semibold text-right whitespace-nowrap text-gray-100">{{ sub.total }}</td>
      </tr>
    </tbody>
  </table>
</div>
{% endfor %}

{% if report.grand_total_items %}
<div class="bg-blue-900/30 border border-blue-800 rounded-lg p-3">
  <div class="text-xs text-gray-400 uppercase tracking-wider mb-2 text-center">Net</div>
  <div class="text-center space-y-1">
    {% for item in report.grand_total_items %}
    <div class="font-mono text-lg font-semibold {% if item.startswith('-') %}text-red-400{% else %}text-green-400{% endif %}">{{ item }}</div>
    {% endfor %}
  </div>
</div>
{% endif %}
{% endblock %}
